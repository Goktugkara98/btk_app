<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Test</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz/quiz_screen.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz/navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz/bottom-bar.css') }}">
</head>
<body>
    <!-- Quiz Topbar/Navbar -->
    <div class="quiz-topbar">
        <div class="topbar-content">
            <div class="topbar-left">
                <div class="quiz-info">
                    <div class="subject-info">
                        <span class="subject-name" id="subject-name">T√ºrk√ße</span>
                        <span class="separator">‚Ä¢</span>
                        <span class="topic-name" id="topic-name">Fiilimsiler</span>
                        <span class="separator">‚Ä¢</span>
                        <span class="difficulty-badge">
                            <span class="difficulty-text" id="difficulty-badge">Orta</span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="topbar-center">
                <div class="question-indicator">
                    <span class="question-label">Soru</span>
                    <span class="question-number-display">
                        <span class="current-question-number" id="current-question-number">1</span>
                        <span class="question-separator">/</span>
                        <span class="total-question-number" id="total-question-number">10</span>
                    </span>
                </div>
            </div>
            <div class="topbar-right">
                <div class="timer-container">
                    <div class="timer-icon">‚è±Ô∏è</div>
                    <div class="timer-content">
                        <span class="timer-label">S√ºre</span>
                        <span class="timer" id="timer">15:30</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Container -->
    <div class="quiz-container">
        <!-- Question Navigation Bar -->
        <div class="question-navigation">
            <div class="question-nav-container">
                <div class="question-nav-list" id="question-nav-list">
                    <!-- Question navigation items will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Quiz Window -->
        <main class="quiz-window">
            <div class="quiz-content">
                <!-- Question Container -->
                <div class="question-container" id="question-container">
                    <div class="question-content">
                        <div class="question-text-container">
                            <h2 class="question-text" id="question-text">
                                <!-- Question text will be loaded by JavaScript -->
                            </h2>
                        </div>
                        
                        <div class="options-container" id="options-container">
                            <!-- Options will be loaded by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Loading State -->
                <div class="loading-state" id="loading-state" style="display: none;">
                    <div class="spinner"></div>
                    <p>Sorular y√ºkleniyor...</p>
                </div>

                <!-- Error State -->
                <div class="error-state" id="error-state" style="display: none;">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h3>Bir hata olu≈ütu</h3>
                    <p id="error-message">Sorular y√ºklenirken bir hata olu≈ütu.</p>
                    <button class="retry-button" id="retry-button">Tekrar Dene</button>
                </div>
            </div>
        </main>

        <!-- Bottom Bar -->
        <footer class="quiz-bottombar">
            <div class="bottombar-content">
                <div class="bottombar-left">
                    <button class="nav-button prev-button" id="prev-button" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        √ñnceki
                    </button>
                </div>
                <div class="bottombar-center">
                    <div class="quiz-mode-info">
                        <span class="mode-label">Quiz Modu:</span>
                        <span class="mode-name" id="quiz-mode">Pratik</span>
                    </div>
                </div>
                <div class="bottombar-right">
                    <button class="nav-button next-button" id="next-button">
                        Sonraki
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </footer>
    </div>
    </div>

    <!-- Debug Info (Hidden in production) -->
    <div id="debug-info" style="display: none;">
        <p>Session ID: <span id="session-id">{{ session_id }}</span></p>
        <p>Status: <span id="status">Y√ºkleniyor...</span></p>
    </div>

    <script>
        // Set session ID globally
        window.QUIZ_SESSION_ID = '{{ session_id }}';
        
        // Debug info
        console.log('üöÄ Starting Quiz Application...');
        console.log('üìã Session ID:', window.QUIZ_SESSION_ID);
        
        // Set debug mode based on environment
        window.DEBUG = window.location.hostname === 'localhost' || 
                      window.location.hostname === '127.0.0.1';
    </script>
    
    <!-- Main Application Script -->
    <script type="importmap">
    {
        "imports": {
            "./core/EventBus": "{{ url_for('static', filename='js/quiz/core/EventBus.js') }}",
            "./core/StateManager": "{{ url_for('static', filename='js/quiz/core/StateManager.js') }}",
            "./core/QuizEngine": "{{ url_for('static', filename='js/quiz/core/QuizEngine.js') }}",
            "./services/ApiService": "{{ url_for('static', filename='js/quiz/services/ApiService.js') }}",
            "./ui/UIManager": "{{ url_for('static', filename='js/quiz/ui/UIManager.js') }}"
        }
    }
    </script>
    <script type="module" src="{{ url_for('static', filename='js/quiz/main.js') }}"></script>
    
    <!-- Debug Panel (only in development) -->
    <script>
        if (window.DEBUG) {
            document.getElementById('debug-info').style.display = 'block';
        }
    </script>
</body>
</html>